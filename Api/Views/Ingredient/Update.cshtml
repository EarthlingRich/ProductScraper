@model IngredientUpdateViewModel
@{
    ViewData["Title"] = Model.Request.Name;
}

<script type="text/javascript">
    document.addEventListener('DOMContentLoaded', function() {
        var keywords = [
            @foreach(var keyword in Model.Request.Keywords)
            {
                <text>{tag: '@keyword'},</text>
            }
        ];
        var allergyKeywords = [
            @foreach(var allergyKeyword in Model.Request.AllergyKeywords)
            {
                <text>{tag: '@allergyKeyword'},</text>
            }
        ];
        Ingredient.initUpdate(keywords, allergyKeywords);
    });
</script>

<h3 class="page-title">@Model.Request.Name</h3>
@using (Html.BeginForm("Update", "Ingredient", FormMethod.Post))
{
<div class="row">
    @Html.HiddenFor(_ => _.Request.Id)
    @Html.HiddenFor(_ => _.Request.KeywordsString)
    @Html.HiddenFor(_ => _.Request.AllergyKeywordsString)
    <div class="clearfix">
        <div class="input-field col s4">
            @Html.TextBoxFor(_ => _.Request.Name)
            @Html.LabelFor(_ => _.Request.Name)
        </div>
    </div>
    <div class="clearfix">
        <div class="input-field col s4">
            @Html.DropDownListFor(_ => Model.Request.VeganType, Html.GetEnumSelectList<VeganType>())
            @Html.LabelFor(_ => Model.Request.VeganType)
        </div>
    </div>
    <div class="col s12">
        <div id="keywords-chips" class="chips input-field">
            <div class="custom-form-label">@Html.DisplayNameFor(_ => _.Request.Keywords)</div>
            <input class="input">
        </div>
    </div>
    <div class="col s12">
        <div id="allergykeywords-chips" class="chips input-field">
            <div class="custom-form-label">@Html.DisplayNameFor(_ => _.Request.AllergyKeywords)</div>
            <input class="input">
        </div>
    </div>
    <div class="col s12">
        <button class="btn waves-effect waves-light" type="submit">@CommonTerms.Action_Save</button>
    </div>
</div>
}